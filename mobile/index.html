<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">

    <title>Kanyon Karver</title>

    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes">

    
    <link rel="shortcut icon" type="image/png" href="./favicon.png">

    

    <script type="text/javascript" src="./lib/howler.min.js"></script>

    <script type="text/javascript" src="./lib/pako.min.js"></script>

    <script type="text/javascript" src="./lib/FileSaver.min.js"></script>

    <script type="text/javascript" src="./lib/GameAnalytics-4.1.2.min.js"></script>

    <script type="text/javascript" src="./lib/parse.js"></script>
    <script type="text/javascript" src="./KK.js"></script>
    <script src='./lib/GameAnalytics-4.1.2.min.js'></script>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js" type="text/javascript"></script>
    <script type='text/javascript' src='https://ad.mail.ru/static/admanhtml/rbadman-html5.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='https://vk.com/js/api/adman_init.js' charset='utf-8'></script>

    <!--<script>
        window.addEventListener ("touchmove",
            function (event) {
                alert("!");
            }, false);

    </script>-->

    <style>
        html,body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #content { background: #000000; width: 100%; height: 100%; }
        		@font-face {
			font-family: 'Monofonto-Regular';
			src: url('font/monofonto.eot?#iefix') format('embedded-opentype'),
			url('font/monofonto.woff') format('woff'),
			url('font/monofonto.ttf') format('truetype'),
			url('font/monofonto.svg#Monofonto-Regular') format('svg');
			font-weight: normal;
			font-style: normal;
		}

    </style>

</head>
<body>

<span style="font-family: font/monofonto.ttf"> </span>

<div id="content"></div>

<script type="text/javascript">

    vkBridge.send('VKWebAppInit');
    var width = getWidth();
    var height = getHeight();
    if (width > 0)
    {
        embed(height, width);
    }
    else
    {
        window.addEventListener('resize', onResize);
    }

    function onResize() {
        width = getWidth();
        height = getHeight();
        embed(height, width);
        window.removeEventListener('resize', onResize);
    }

    function getWidth() {
        if (self.innerWidth) {
            return self.innerWidth;
        }

        if (document.documentElement && document.documentElement.clientWidth) {
            return document.documentElement.clientWidth;
        }

        if (document.body) {
            return document.body.clientWidth;
        }
    }

    function getHeight() {
        if (self.innerHeight) {
            return self.innerHeight;
        }

        if (document.documentElement && document.documentElement.clientHeight) {
            return document.documentElement.clientHeight;
        }

        if (document.body) {
            return document.body.clientHeight;
        }
    }

    function embed(height, width) {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var id = url.searchParams.get("viewer_id");
        console.log(id);
        window.isMe = (id == "140553" || id == "379989339");
        console.log("embed");
        lime.embed ("KK", "content", 1920, 1920 * height / width);
    }
</script>

</body>
</html>